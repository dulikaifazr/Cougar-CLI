/**
 * ğŸ”§ æ‰§è¡Œå‘½ä»¤å·¥å…·å®šä¹‰
 * æ¥æº: æç¤ºè¯/ç³»ç»Ÿæç¤ºè¯/å·¥å…·å®šä¹‰ï¼ˆ19ä¸ªå·¥å…·ï¼‰/æ‰§è¡Œå‘½ä»¤å·¥å…·å®šä¹‰.ts
 * 
 * ä½œç”¨ï¼šåœ¨ç”¨æˆ·ç»ˆç«¯æ‰§è¡Œ CLI å‘½ä»¤
 * 
 * å‚æ•°ï¼š
 * - commandï¼ˆå¿…éœ€ï¼‰ï¼šè¦æ‰§è¡Œçš„å‘½ä»¤
 * - requires_approvalï¼ˆå¯é€‰ï¼‰ï¼šæ˜¯å¦éœ€è¦ç”¨æˆ·æ‰¹å‡†
 * - task_progressï¼ˆå¯é€‰ï¼‰
 * 
 * ç”¨é€”ï¼š
 * - è¿è¡Œæ„å»ºè„šæœ¬
 * - å®‰è£…ä¾èµ–
 * - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
 * 
 * CLI é€‚é…ï¼š100% ä¿ç•™æ ¸å¿ƒåŠŸèƒ½
 */

import { ModelFamily, ClineDefaultTool, TASK_PROGRESS_PARAMETER, type ClineToolSpec } from './types';

const generic: ClineToolSpec = {
  variant: ModelFamily.GENERIC,
  id: ClineDefaultTool.BASH,
  name: 'execute_command',
  description: `è¯·æ±‚åœ¨ç³»ç»Ÿä¸Šæ‰§è¡Œ CLI å‘½ä»¤ã€‚å½“æ‚¨éœ€è¦æ‰§è¡Œç³»ç»Ÿæ“ä½œæˆ–è¿è¡Œç‰¹å®šå‘½ä»¤ä»¥å®Œæˆç”¨æˆ·ä»»åŠ¡ä¸­çš„ä»»ä½•æ­¥éª¤æ—¶ä½¿ç”¨æ­¤å·¥å…·ã€‚æ‚¨å¿…é¡»æ ¹æ®ç”¨æˆ·çš„ç³»ç»Ÿå®šåˆ¶å‘½ä»¤ï¼Œå¹¶æä¾›å‘½ä»¤åŠŸèƒ½çš„æ¸…æ™°è¯´æ˜ã€‚å¯¹äºå‘½ä»¤é“¾æ¥ï¼Œè¯·ä½¿ç”¨é€‚åˆç”¨æˆ· shell çš„é“¾æ¥è¯­æ³•ã€‚ä¼˜å…ˆæ‰§è¡Œå¤æ‚çš„ CLI å‘½ä»¤è€Œä¸æ˜¯åˆ›å»ºå¯æ‰§è¡Œè„šæœ¬ï¼Œå› ä¸ºå®ƒä»¬æ›´çµæ´»ä¸”æ›´å®¹æ˜“è¿è¡Œã€‚å‘½ä»¤å°†åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­æ‰§è¡Œ: {{CWD}}{{MULTI_ROOT_HINT}}`,
  parameters: [
    {
      name: 'command',
      required: true,
      instruction: `è¦æ‰§è¡Œçš„ CLI å‘½ä»¤ã€‚è¿™åº”è¯¥å¯¹å½“å‰æ“ä½œç³»ç»Ÿæœ‰æ•ˆã€‚ç¡®ä¿å‘½ä»¤æ ¼å¼æ­£ç¡®ä¸”ä¸åŒ…å«ä»»ä½•æœ‰å®³æŒ‡ä»¤ã€‚`,
      usage: 'æ‚¨çš„å‘½ä»¤',
    },
    {
      name: 'requires_approval',
      required: true,
      instruction:
        "ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºåœ¨ç”¨æˆ·å¯ç”¨è‡ªåŠ¨æ‰¹å‡†æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œæ­¤å‘½ä»¤åœ¨æ‰§è¡Œå‰æ˜¯å¦éœ€è¦ç”¨æˆ·æ˜ç¡®æ‰¹å‡†ã€‚å¯¹äºå¯èƒ½äº§ç”Ÿå½±å“çš„æ“ä½œï¼Œå¦‚å®‰è£…/å¸è½½è½¯ä»¶åŒ…ã€åˆ é™¤/è¦†ç›–æ–‡ä»¶ã€ç³»ç»Ÿé…ç½®æ›´æ”¹ã€ç½‘ç»œæ“ä½œæˆ–ä»»ä½•å¯èƒ½äº§ç”Ÿæ„å¤–å‰¯ä½œç”¨çš„å‘½ä»¤ï¼Œè®¾ç½®ä¸º 'true'ã€‚å¯¹äºå®‰å…¨æ“ä½œï¼Œå¦‚è¯»å–æ–‡ä»¶/ç›®å½•ã€è¿è¡Œå¼€å‘æœåŠ¡å™¨ã€æ„å»ºé¡¹ç›®å’Œå…¶ä»–éç ´åæ€§æ“ä½œï¼Œè®¾ç½®ä¸º 'false'ã€‚",
      usage: 'true æˆ– false',
    },
    {
      name: 'timeout',
      required: false,
      contextRequirements: (context) => context.yoloModeToggled === true,
      instruction:
        'è¡¨ç¤ºè¿è¡Œç»ˆç«¯å‘½ä»¤çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰çš„æ•´æ•°ï¼Œè¶…æ—¶åå°†ç»§ç»­ä»»åŠ¡ã€‚',
      usage: '30',
    },
  ],
};

const gpt: ClineToolSpec = {
  variant: ModelFamily.GPT,
  id: ClineDefaultTool.BASH,
  name: 'bash',
  description:
    'åœ¨ç”¨æˆ·é¡¹ç›®çš„æ ¹ç›®å½•è¿è¡Œä»»æ„ç»ˆç«¯å‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ `ls -la` åˆ—å‡ºæ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨ `find` æœç´¢æœ¬åœ°ä»£ç åº“æ–‡ä»¶çš„æœ€æ–°ç‰ˆæœ¬ã€‚',
  parameters: [
    {
      name: 'command',
      required: true,
      instruction: 'è¦åœ¨ç”¨æˆ·é¡¹ç›®çš„æ ¹ç›®å½•ä¸­è¿è¡Œçš„å‘½ä»¤ã€‚å¿…é¡»è¿›è¡Œ shell è½¬ä¹‰ã€‚',
      usage: 'æ‚¨çš„å‘½ä»¤',
    },
    {
      name: 'requires_approval',
      required: false,
      instruction: 'å‘½ä»¤æ˜¯å¦å±é™©ã€‚å¦‚æœä¸º trueï¼Œå°†è¦æ±‚ç”¨æˆ·ç¡®è®¤ã€‚',
    },
    {
      name: 'timeout',
      required: false,
      contextRequirements: (context) => context.yoloModeToggled === true,
      instruction:
        'è¡¨ç¤ºè¿è¡Œç»ˆç«¯å‘½ä»¤çš„è¶…æ—¶æ—¶é—´ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰çš„æ•´æ•°ï¼Œè¶…æ—¶åå°†ç»§ç»­ä»»åŠ¡ã€‚',
      usage: '30',
    },
    TASK_PROGRESS_PARAMETER,
  ],
};

export const execute_command_variants = [generic, gpt];